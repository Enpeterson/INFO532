<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Module 2 Introduction to R | INFO 532: Advanced GIS</title>
<meta name="author" content="Emily Peterson &amp; Alex Edwards">
<meta name="description" content="This section describes the basic ways of assigning values to different types of R objects and different classes of R objects. R and RStudio must be installed on your system! Refer to Lab 0 for...">
<meta name="generator" content="bookdown 0.35 with bs4_book()">
<meta property="og:title" content="Module 2 Introduction to R | INFO 532: Advanced GIS">
<meta property="og:type" content="book">
<meta property="og:description" content="This section describes the basic ways of assigning values to different types of R objects and different classes of R objects. R and RStudio must be installed on your system! Refer to Lab 0 for...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Module 2 Introduction to R | INFO 532: Advanced GIS">
<meta name="twitter:description" content="This section describes the basic ways of assigning values to different types of R objects and different classes of R objects. R and RStudio must be installed on your system! Refer to Lab 0 for...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">INFO 532: Advanced GIS</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">INFO 532: Advanced Geographic Information Systems Fall 2023</a></li>
<li><a class="" href="introduction-to-gis.html"><span class="header-section-number">1</span> Introduction to GIS</a></li>
<li><a class="active" href="intro.html"><span class="header-section-number">2</span> Introduction to R</a></li>
<li><a class="" href="lecture3.html"><span class="header-section-number">3</span> Data Wrangling</a></li>
<li><a class="" href="lecture4.html"><span class="header-section-number">4</span> Basic GIS Operations</a></li>
<li><a class="" href="introduction-to-raster-in-r.html"><span class="header-section-number">5</span> Introduction to Raster in R</a></li>
<li><a class="" href="introduction-to-kernel-density-estimation.html"><span class="header-section-number">6</span> Introduction to Kernel Density Estimation</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/Enpeterson/INFO532">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="intro" class="section level1" number="2">
<h1>
<span class="header-section-number">Module 2</span> Introduction to R<a class="anchor" aria-label="anchor" href="#intro"><i class="fas fa-link"></i></a>
</h1>
<p>This section describes the basic ways of assigning values to different types of R objects and different classes of R objects. R and RStudio must be installed on your system! Refer to Lab 0 for installation directions.</p>
<div id="panes-in-rstudio" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Panes in RStudio<a class="anchor" aria-label="anchor" href="#panes-in-rstudio"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><p>The Source Editor can help you open, edit, execute and save these programs. It is the panel on the top left of your screen.</p></li>
<li><p>The console is where you can type code that is executed immediately. This is also known as the command line. It is at the bottom left of your screen.</p></li>
<li><p>The Environment pane is very useful as it shows you what objects (i.e. arrays, data, functions) you have in your workspace.</p></li>
<li>
<p>The last pane has a number of different tabs:</p>
<ul>
<li>The Files tab has a navigable file manager.</li>
<li>The Packages tab shows you the packages installed.</li>
<li>The Plot tab is where graphics are shown.</li>
<li>The Help tab allows you to search R documentation for help.</li>
</ul>
</li>
</ul>
</div>
<div id="your-first-r-script" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> Your first R script<a class="anchor" aria-label="anchor" href="#your-first-r-script"><i class="fas fa-link"></i></a>
</h2>
<div class="rmdnote">
<p><strong>What is an Rscript?</strong>
An Rscript is simply a text file containing (almost) the same commands that you would enter on the command line of R.</p>
</div>
<ul>
<li>Open RStudio.</li>
<li>Go to <strong>File</strong>.</li>
<li>Select <strong>New File</strong>
</li>
<li>Select <strong>R Script</strong>.</li>
<li>Save/Name the R script in a working directory.</li>
</ul>
<p>Below is an example of an Rscript that was saved as info-532_rscript.R. In the RStudio session, you see the created <strong>Rscript</strong> on the left-top pane. In this pane you will write all your R code to be saved within the Rscript. The bottom-left pane <strong>Console</strong> shows completed functions or tasks. The right panes shows the Global Environment and the Viewer panes (coming back to this later).</p>
<div class="inline-figure"><img src="fig/firstcommand.png" width="70%" style="display: block; margin: auto;"></div>
<p>In order to execute commands from your Rscript, select the line of code you want to run and press (CMD-Enter on a Mac). There is also a Run button on the top right of your Script panel. You can select the lines of code, and use either of these ways to get your commands to run. Once completed, it will show up in the console panel.</p>
<p>The &gt; in the console panel indicates that code is ready to be run. The figure below shows a few lines of code that has been written in the Rscript (top left pane), and then has been executed. You can see in the console pane (bottom left) the code has been executed and the results are shown below each line of code.</p>
<p><strong>Assiging values to objects</strong></p>
<p>In an Rscript, we often want to define or assign an object in order to use it in later functions. We can do this using the &lt;- symbol. Using the above example, the number of 10 was used in 2 lines of code, i.e., <span class="math inline">\(sqrt(10)\)</span> and <span class="math inline">\(10^2\)</span>. Instead, it is more efficient to assign an object to be 10 so it can be used multiple times. In the code below, we assign <span class="math inline">\(x\)</span> to have a value of 10 by typing <span class="math inline">\(x\)</span> &lt;- 10 in our Rscript, and then use <span class="math inline">\(x\)</span> in the following commands. You can see the results in the console pane, where it knows that <span class="math inline">\(x=10\)</span> and so runs the calculations on <span class="math inline">\(x\)</span> to produce the shown results.</p>
<p><img src="fig/xassign.jpg" width="70%" style="display: block; margin: auto;">
Notice that something has been added to your <strong>Global Environment</strong> pane on the top-right. What does this mean? When anything is assigned in your Rscript (using &lt;-), it needs to be saved somewhere so it can be used multiple times. It is saved in a space called the <strong>Global Environment</strong>. Anything you assign or create is shown in the <strong>Global Environment</strong> pane. The top-right pane shows that an object named <span class="math inline">\(x\)</span> was assigned a value of 10.</p>
</div>
<div id="data-types-in-r" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> Data Types in R<a class="anchor" aria-label="anchor" href="#data-types-in-r"><i class="fas fa-link"></i></a>
</h2>
<p>The first bit of coding above was to get you used to the R environment. Now we are going to explore the different data types in R. There are a few fundamental data types in R the provide the building blocks for any data analysis. This section will explore some of these data types and illustrate how to perform operations on them.</p>
<div id="vectors" class="section level3" number="2.3.1">
<h3>
<span class="header-section-number">2.3.1</span> Vectors<a class="anchor" aria-label="anchor" href="#vectors"><i class="fas fa-link"></i></a>
</h3>
<p>A vector is a group of values of the same type. What this means is that all the values are either numerical (numbers), characters (letters), or logical (True or False). A vector is created in the Rscript using the combine function, written as the <span class="math inline">\(c()\)</span> command. Using the code below we create a vector of numbers (2,…,8). We assign (&lt;-) this vector the name <span class="math inline">\(x\)</span>. We also create a vector of numbers called <span class="math inline">\(y\)</span>. Let’s say we want to combine <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> to create one long vector called the <span class="math inline">\(z\)</span>. We can simply <em>combine</em> them using the <span class="math inline">\(c()\)</span> command.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Create numeric vector x</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">5</span>,<span class="fl">7</span>,<span class="fl">8</span><span class="op">)</span></span>
<span><span class="co">#Create numeric vector y</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#Combine x and y to make z</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Look at z</span></span>
<span><span class="va">z</span></span></code></pre></div>
<pre><code> [1] 2 3 5 7 8 1 1 2 3 4</code></pre>
<p>Vectors are not just groups of numbers, but also can be groups of characters or True/False values. Below a vector of cities has been created called <em>cities</em> and a vector of fruits has been created called <em>fruits</em>. Note that when typing characters in an Rscript, the words/characters must be enclosed with quotations marks to indicate it is a character value. When there is a missing value in a vector it is denoted with <em>NA</em> shown below.</p>
<p>A logical vector is a group of elements that are either TRUE or FALSE. For example, looking at the cities vector, you can create a logical vector that indicates if each city is in the Northern US as shown below. Again here <em>NA</em> indicates a missing value.</p>
<p>A factor vector consists of specified categories. For example the factor vector created below called <em>blood.pressure</em> has 8 elements, but three main categories of (1) Low, (2) Medium, and (3) High. So we use the <em>factor()</em> command to take the character values and order them based on the assigned levels. When we look at the blood.pressure vector we see the 8 elements first [1], and also how the different levels are defined.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Character vectors</span></span>
<span><span class="va">cities</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"New York City"</span>, <span class="st">"Atlanta"</span>, <span class="st">"Seattle"</span>, <span class="st">"Dallas"</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="va">fruits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"apples"</span>, <span class="st">"kiwis"</span>, <span class="st">"watermelon"</span>, <span class="st">"bananas"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Logical vectors (are the cities norther?)</span></span>
<span><span class="va">northern</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>,<span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Factor vector</span></span>
<span><span class="va">blood.pressure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"High"</span>, <span class="st">"Medium"</span>, <span class="st">"High"</span>, <span class="st">"Low"</span>, <span class="st">"Medium"</span>, <span class="st">"Low"</span>, <span class="st">"High"</span>, <span class="st">"High"</span><span class="op">)</span>,</span>
<span>                         levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="st">"Medium"</span>, <span class="st">"High"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">blood.pressure</span></span></code></pre></div>
<pre><code>[1] High   Medium High   Low    Medium Low    High   High  
Levels: Low Medium High</code></pre>
</div>
<div id="matrices-and-data-frames" class="section level3" number="2.3.2">
<h3>
<span class="header-section-number">2.3.2</span> Matrices and Data Frames<a class="anchor" aria-label="anchor" href="#matrices-and-data-frames"><i class="fas fa-link"></i></a>
</h3>
<p>Matrices and data frame are like data tables with a row and column structure. The main difference between a matrix and data frame is that in a matrix it can only contain a single data type (e.g., numeric, logical, character), and a data frame can contain multiple types in each column. In both cases matrices and data frames are simply multiple vectors combined together.</p>
<p>To define a matrix, use the command matrix as shown below. We create a matrix of the sequence of numbers 1 to 10. Note how the sequence of numbers is ordered with the <em>byrow</em> parameter. If <em>byrow</em> is set to FALSE, it is ordered by column. The matrix has 2 columns and 5 rows, which was defined by <em>ncol = 2</em>. We can change the number of columns to be 5 with 2 rows. Positions of matrix elements (called subscripts) are indicated by a row and column number, which is shown within square brackets [row,col].The row number is indicated vertically on the left. (e.g., rows 1 &amp; 2 are [1,], [2,]). And the column number is indicated horizontally above the first row (e.g., columns 1 &amp; 2 are [,1], [,2]). If you want to see the element at a given position (subscript), write out the name of the matrix and the position number shown below. In this example we examine the matrix at positions [1,1] and [5,2]. In position [1,1], the value is 1, and in position [2,5] the value is 10. If you input a position that doesn’t exist, it will give an error message stating the subscript are out of bounds.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">matrix_byrow</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, ncol <span class="op">=</span><span class="fl">2</span>, byrow<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">matrix_byrow</span></span></code></pre></div>
<pre><code>     [,1] [,2]
[1,]    1    2
[2,]    3    4
[3,]    5    6
[4,]    7    8
[5,]    9   10</code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">matrix_bycol</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="va">matrix_bycol</span></span></code></pre></div>
<pre><code>     [,1] [,2]
[1,]    1    6
[2,]    2    7
[3,]    3    8
[4,]    4    9
[5,]    5   10</code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">matrix_col</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, ncol <span class="op">=</span><span class="fl">5</span>, byrow <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">matrix_col</span></span></code></pre></div>
<pre><code>     [,1] [,2] [,3] [,4] [,5]
[1,]    1    2    3    4    5
[2,]    6    7    8    9   10</code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">matrix_col</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<pre><code>[1] 1</code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">matrix_col</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">5</span><span class="op">]</span></span></code></pre></div>
<pre><code>[1] 10</code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">matrix_col</span><span class="op">[</span><span class="fl">5</span>,<span class="fl">2</span><span class="op">]</span></span></code></pre></div>
<pre><code>Error in matrix_col[5, 2]: subscript out of bounds</code></pre>
<p>Matrices can contain any data type, but it must be the same data type. For example, a matrix of characters is defined below.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"apples"</span>, <span class="st">"bananas"</span>,<span class="st">"pears"</span>, <span class="st">"apples"</span>, <span class="st">"pears"</span>, <span class="st">"kiwis"</span><span class="op">)</span></span>
<span><span class="va">matrix_fruits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="va">x</span>, ncol <span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">matrix_fruits</span></span></code></pre></div>
<pre><code>     [,1]      [,2]    
[1,] "apples"  "apples"
[2,] "bananas" "pears" 
[3,] "pears"   "kiwis" </code></pre>
<p>Data frames are data tables that contain multiple types of vectors. For example, you can combine a numeric and logical vector within one data frame. To create a data frame, the <em>data.frame()</em> command is used. Below is an example, where a vector of numbers, fruits (vector <span class="math inline">\(x\)</span> above), and a logical vector is combined in the same data frame called <em>df</em>. IMPORTANTLY, the vectors must be the same length to be combined. The resulting data frame (df) has 6 rows and 3 columns. You can also subset (examine) the data frame using subscripts like in a matrix. Below values for positions at [1,1], [3,2], and the first row[1,] are shown.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">numbers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">fruits</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="co">#it is the same vector as above.</span></span>
<span><span class="va">logical_vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">numbers</span>, <span class="va">fruits</span>, <span class="va">logical_vec</span><span class="op">)</span></span>
<span><span class="va">df</span></span></code></pre></div>
<pre><code>  numbers  fruits logical_vec
1       1  apples        TRUE
2       2 bananas       FALSE
3       4   pears       FALSE
4       5  apples       FALSE
5       6   pears        TRUE
6       1   kiwis        TRUE</code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Subset to position [1,1]</span></span>
<span><span class="va">df</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<pre><code>[1] 1</code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Subset to position [3,2]</span></span>
<span><span class="va">df</span><span class="op">[</span><span class="fl">3</span>,<span class="fl">2</span><span class="op">]</span></span></code></pre></div>
<pre><code>[1] "pears"</code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Subset to the first row only.</span></span>
<span><span class="va">df</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span></span></code></pre></div>
<pre><code>  numbers fruits logical_vec
1       1 apples        TRUE</code></pre>
</div>
</div>
<div id="functions-and-packages-in-r" class="section level2" number="2.4">
<h2>
<span class="header-section-number">2.4</span> Functions and Packages in R<a class="anchor" aria-label="anchor" href="#functions-and-packages-in-r"><i class="fas fa-link"></i></a>
</h2>
<p>R programming language is a lot like magic, except instead of spells you have functions. You can think of functions as “wrappers” that condense longer code into simpler codes so you can write one line instead of 10 lines.</p>
<div class="rmdnote">
<p><strong>What is a function?</strong></p>
<p>A function in R is an object that takes in a data input and performs a pre-defined operation to then output the desired result. Functions in R can be built-in or created by the user (user-defined).</p>
</div>
<p>Functions are enclosed with round brackets (). There are many many many pre-defined functions in R. However, you can also create your own functions in R. For this class, we will use many of the pre-defined functions, but will show an example below of how to create a function. We show examples of pre-defined functions below, which we apply to the numeric vector <span class="math inline">\(x\)</span>.</p>
<ul>
<li>The <em>sqrt()</em> function calculates the square root of the input.</li>
<li>The <em>min()</em> function calculates the minimum value of the input.</li>
<li>The <em>max()</em> function calculates the max value of the input.</li>
<li>The <em>summary()</em> function calculates the statistical summaries (mean, sd, min, max, and quartiles) of the input.</li>
</ul>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2.1</span>, <span class="fl">5.4</span>, <span class="fl">6.7</span>, <span class="fl">1.3</span>, <span class="fl">5.2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 1.449138 2.323790 2.588436 1.140175 2.280351</code></pre>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 1.3</code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 6.7</code></pre>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1.30    2.10    5.20    4.14    5.40    6.70 </code></pre>
<p>To write a user-defined (custom) function, you create an R function using the <em>function()</em> command, and define the calculation to perform, and the output to be displayed. For example, below a function is created and assigned (&lt;-) the name <em>my_function</em>. To create the function itself, the <em>function()</em> command is used, and the data inputs are defined as <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> (we have not defined what <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> are yet). Within the function the sum <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> is calculated and returned as an output.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_function</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span><span class="op">)</span><span class="op">{</span> <span class="co">#create a function called my_function</span></span>
<span></span>
<span>  <span class="va">sum</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">+</span><span class="va">y</span> <span class="co">#the function calculates sum of x and y</span></span>
<span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">sum</span><span class="op">)</span> <span class="co">#the function returns the sum</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><em>my_function</em> has not been applied to any data yet. So below, we illustrate the use of <em>my_function</em> on both numbers and numeric vectors. IMPORTANTLY, do not forget to include the comma when there are multiple data inputs within the function ().</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Perform my_function on two numbers x and y.</span></span>
<span><span class="fu">my_function</span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span>, y <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 6</code></pre>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">my_function</span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1000</span>, y <span class="op">=</span> <span class="fl">300</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 1300</code></pre>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Perform my_function on two numeric vectors x and y.</span></span>
<span><span class="fu">my_function</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">7</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">7</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1]  1  9  9 11 13</code></pre>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">my_function</span><span class="op">(</span>x <span class="op">=</span> <span class="fl">6</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">7</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">7</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1]  6 13 11 12 13</code></pre>
<div class="rmdnote">
<p><strong>What is a package?</strong>
A package is simply a collections of functions. Packages also contain published data sets.</p>
</div>
<p>There are 16K packages in R. One great thing about R, is that people/coders like to share what they create. They do this through packages, where you can access their pre-defined functions that have been tested, and come with help documentation. R packages are stored and shared via the CRAN repository. The number of packages is continually growing.</p>
<p>To use a package, users need to install it only once, and then can continually call the package when needed. For example to install a package, use the syntax given below. It calls the package by its name, and requires all other needed packages to also be called installed <span class="math inline">\(depedencies = TRUE\)</span>.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"package_name"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span>, repos <span class="op">=</span> <span class="st">"http://cran.us.r-project.org"</span><span class="op">)</span></span></code></pre></div>
<p>For example, popular packages to be installed are <em>tidyverse</em> and <em>dplyr</em>.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"tidyverse"</span><span class="op">)</span>, dependencies <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p>Once the packages are installed, they are saved in the local R libraries. This means they do not need to be installed again. In order to use the functions within the package, a package needs to be called using the <em>library()</em> function. For example, running the code below calls the dplyr package. There will be R statements below indicating the package has been called.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<p>To review any given function from a package, the <em>help()</em> or <em>?</em> function will publish the documentation for the function to show required inputs, calculations, and outputs. For example, to review the <em>min()</em> function, use the syntax below in the console.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/help.html">help</a></span><span class="op">(</span><span class="va">min</span><span class="op">)</span></span></code></pre></div>
<pre><code>Help on topic 'min' was found in the following packages:

  Package               Library
  base                  /Library/Frameworks/R.framework/Resources/library
  terra                 /Users/emilypeterson/Library/R/4.0/library


Using the first match ...</code></pre>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">min</span></span></code></pre></div>
<pre><code>Help on topic 'min' was found in the following packages:

  Package               Library
  base                  /Library/Frameworks/R.framework/Resources/library
  terra                 /Users/emilypeterson/Library/R/4.0/library


Using the first match ...</code></pre>
<p>The bottom-right pane publishes viewer output including: help documentation, and plots. If you type the above code in the console, the viewer pane will publish the help documentation for the min function.</p>
</div>
<div id="writing-reproducible-code" class="section level2" number="2.5">
<h2>
<span class="header-section-number">2.5</span> Writing Reproducible Code<a class="anchor" aria-label="anchor" href="#writing-reproducible-code"><i class="fas fa-link"></i></a>
</h2>
<p>When R users write code, it is extremely important to write R scripts that are understandable to any user. It allows for sharing of Rscripts, re-running code, and getting reproducible results. Additionally, it allows for running programs across multiple data sets. It is essential for transparent research.</p>
<p>An Rscript workflow described the organization of your code, and is important for you or other users to be able to understand your code later. The following steps outline a helpful way to write reproducible Rscripts.</p>
<ul>
<li>Describe the name, purpose, and author of the Rscript using # to comment out text.</li>
<li>Name things/objects with obvious clear names, i.e., data is not a great name, but county_data is a great name.</li>
<li>Call libraries needed.</li>
<li>Read in data</li>
<li>Perform calculations.</li>
<li>When possible condense multiple lines of code.</li>
<li>Be sure to add comments through out the code to describe steps.</li>
<li>Save output.</li>
</ul>
<p>We are going to review your codes…don’t be afraid!</p>
<p>An example of a good Rscript workflow is shown below. The Rscript calls the <em>tidycensus</em> and <em>ggplot</em> libraries to use the <em>get_decennial()</em> function. It extracts a data frame with 2010 total population counts by state from the US Census.
Good we have a function to do that for us right? Then it shows the first 6 rows of the data frame using the <em>head()</em> function. Lastly, we create a plot of population total by state using the <em>ggplot()</em> function. Note that each steps has comments in gereen, and the names of the R objects are clear and concise. Also note, the data frame is saved in the Global Environment pane top-right, and the plot is shown in the Viewer pane (bottom right).</p>
<div class="inline-figure"><img src="fig/workflow.jpg" width="70%" style="display: block; margin: auto;"></div>
</div>
<div id="creating-a-r-markdown-file" class="section level2" number="2.6">
<h2>
<span class="header-section-number">2.6</span> Creating a R Markdown file<a class="anchor" aria-label="anchor" href="#creating-a-r-markdown-file"><i class="fas fa-link"></i></a>
</h2>
<p>R Markdown allows you to create documents that serve as a neat record of your analysis. RMarkdown presents your code alongside its output (graphs, tables, etc.) with conventional text to explain it, a bit like a notebook.</p>
<p>RMarkdown makes use of Markdown syntax. It is a <code>markup</code> language which provides methods for creating documents with headers, images, links etc. You can convert Markdown documents to many other types of files like .html or .pdf.</p>
<p>First to get RMarkdown working in RStudio, you need to install the <span class="math inline">\(markdown\)</span> package from CRAN by running the following:</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"rmarkdown"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/rmarkdown">rmarkdown</a></span><span class="op">)</span></span></code></pre></div>
<p>To create an RMarkdown file (.Rmd file), select <em>File</em> -&gt; <em>New File</em> -&gt; R Markdown. There will be a space to enter the title and the author. It also gives option to export as an html or a pdf. If you have already installed and worked with LaTex then you can select either. If you do not have LaTex, select the html option.
<img src="fig/markdown.jpg" width="50%" style="display: block; margin: auto;"></p>
<div id="the-yaml-header" class="section level3" number="2.6.1">
<h3>
<span class="header-section-number">2.6.1</span> The YAML Header<a class="anchor" aria-label="anchor" href="#the-yaml-header"><i class="fas fa-link"></i></a>
</h3>
<p>At the top of any RMarkdown script is a <em>YAML</em> header section enclosed by —. By default this includes a title, author, date and the file type you want to output. The default output is an html document.</p>
<p>To compile the document, click on the <em>Knitr</em> button on the top panel. It will produce the html document.</p>
</div>
<div id="markdown-syntax" class="section level3" number="2.6.2">
<h3>
<span class="header-section-number">2.6.2</span> Markdown syntax<a class="anchor" aria-label="anchor" href="#markdown-syntax"><i class="fas fa-link"></i></a>
</h3>
<p>Refer to the <a href="https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf">RMarkdown Cheat Sheet</a> to get help with syntax and common text formatting commands. Additionally, a detailed guide to Rmarkdown can be found at <a href="https://ourcodingclub.github.io/tutorials/rmarkdown/#:~:text=To%20create%20a%20new%20RMarkdown,type%20you%20want%20to%20create.">Getting Started with R Markdown</a>.</p>
<p>To embed R code within an Rmarkdown file, we use what are called code chunks. There are options on what is outputted from the code chunk.
+ {r, eval =F} includes the code chunk within the Rmarkdown file, but does not run the code inside the chunk.
+ {r, echo =F} includes the output, but does not include the code in the Rmarkdown file.
+ {r, include =F} excludes both the chunk and the output, but runs the code within the chunk.
+ {r, warning =F} hides all warning messages within the output.
+ {r, comment = NA} removes the double ## within the code chunk.</p>
<div class="inline-figure"><img src="fig/codechunk.jpg" width="99%" style="display: block; margin: auto;"></div>
<div class="rmdlab">
<p><strong>Lab 1 Activity</strong></p>
<ol style="list-style-type: decimal">
<li>Open a new RMarkdown file.</li>
<li>Change the title of the markdown file to “INFO 532 First Markdown”.</li>
<li>Change the author to your name.</li>
<li>Save the markdown file as “LastName_Lecture 1 RMarkdown.RMD”</li>
<li>Add a header and sub-header using # Header and ## Sub-header.</li>
<li>Give a brief text description of each pane of RStudio and its function.</li>
<li>Create a new R chunk.</li>
<li>Within the chunk create the following
<ul>
<li>a numeric vector of length 6</li>
<li>a character vector of length 6</li>
<li>a logical vector of length 6</li>
<li>a factor vector of length 6</li>
<li>a 3 x 3 matrix</li>
<li>a data frame that combines the numeric, character, logical, and factor vectors above.</li>
</ul>
</li>
<li>Review and write comments through your chunk to explain each step.</li>
<li>Create another R chunk and include the following</li>
</ol>
<ul>
<li>Take the square root of the numeric vector you created.</li>
<li>install the <span class="math inline">\(dplyr\)</span> package.</li>
<li>Call the <span class="math inline">\(dplyr\)</span> library.</li>
<li>Again review and write comments within your code to describe each step.</li>
</ul>
<ol start="10" style="list-style-type: decimal">
<li>Knit the RMarkdown file using the <span class="math inline">\(Knit\)</span> button to create an html document.</li>
<li>Save the html as a pdf document and submit to Canvas.</li>
</ol>
</div>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="introduction-to-gis.html"><span class="header-section-number">1</span> Introduction to GIS</a></div>
<div class="next"><a href="lecture3.html"><span class="header-section-number">3</span> Data Wrangling</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#intro"><span class="header-section-number">2</span> Introduction to R</a></li>
<li><a class="nav-link" href="#panes-in-rstudio"><span class="header-section-number">2.1</span> Panes in RStudio</a></li>
<li><a class="nav-link" href="#your-first-r-script"><span class="header-section-number">2.2</span> Your first R script</a></li>
<li>
<a class="nav-link" href="#data-types-in-r"><span class="header-section-number">2.3</span> Data Types in R</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#vectors"><span class="header-section-number">2.3.1</span> Vectors</a></li>
<li><a class="nav-link" href="#matrices-and-data-frames"><span class="header-section-number">2.3.2</span> Matrices and Data Frames</a></li>
</ul>
</li>
<li><a class="nav-link" href="#functions-and-packages-in-r"><span class="header-section-number">2.4</span> Functions and Packages in R</a></li>
<li><a class="nav-link" href="#writing-reproducible-code"><span class="header-section-number">2.5</span> Writing Reproducible Code</a></li>
<li>
<a class="nav-link" href="#creating-a-r-markdown-file"><span class="header-section-number">2.6</span> Creating a R Markdown file</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#the-yaml-header"><span class="header-section-number">2.6.1</span> The YAML Header</a></li>
<li><a class="nav-link" href="#markdown-syntax"><span class="header-section-number">2.6.2</span> Markdown syntax</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/Enpeterson/INFO532/blob//02-introR.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/Enpeterson/INFO532/edit//02-introR.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>INFO 532: Advanced GIS</strong>" was written by Emily Peterson &amp; Alex Edwards. It was last built on Last updated: 2023-10-16.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>

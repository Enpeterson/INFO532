<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Module 4 Basic GIS Operations | INFO 532: Advanced GIS</title>
<meta name="author" content="Emily Peterson &amp; Alex Edwards">
<meta name="description" content="Thought box In GIS and spatial analysis, we are often interested in finding out how the information contained in one spatial dataset relates to that contained in another. Big Picture Question: Our...">
<meta name="generator" content="bookdown 0.35 with bs4_book()">
<meta property="og:title" content="Module 4 Basic GIS Operations | INFO 532: Advanced GIS">
<meta property="og:type" content="book">
<meta property="og:description" content="Thought box In GIS and spatial analysis, we are often interested in finding out how the information contained in one spatial dataset relates to that contained in another. Big Picture Question: Our...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Module 4 Basic GIS Operations | INFO 532: Advanced GIS">
<meta name="twitter:description" content="Thought box In GIS and spatial analysis, we are often interested in finding out how the information contained in one spatial dataset relates to that contained in another. Big Picture Question: Our...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">INFO 532: Advanced GIS</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">INFO 532: Advanced Geographic Information Systems Fall 2023</a></li>
<li><a class="" href="introduction-to-gis.html"><span class="header-section-number">1</span> Introduction to GIS</a></li>
<li><a class="" href="intro.html"><span class="header-section-number">2</span> Introduction to R</a></li>
<li><a class="" href="lecture3.html"><span class="header-section-number">3</span> Data Wrangling</a></li>
<li><a class="active" href="lecture4.html"><span class="header-section-number">4</span> Basic GIS Operations</a></li>
<li><a class="" href="introduction-to-raster-in-r.html"><span class="header-section-number">5</span> Introduction to Raster in R</a></li>
<li><a class="" href="introduction-to-kernel-density-estimation.html"><span class="header-section-number">6</span> Introduction to Kernel Density Estimation</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/Enpeterson/INFO532">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="lecture4" class="section level1" number="4">
<h1>
<span class="header-section-number">Module 4</span> Basic GIS Operations<a class="anchor" aria-label="anchor" href="#lecture4"><i class="fas fa-link"></i></a>
</h1>
<div class="rmdtip">
<p><strong>Thought box</strong>
In GIS and spatial analysis, we are often interested in finding out how the information contained in one spatial dataset relates to that contained in another.</p>
<ul>
<li>Big Picture Question: Our public health goal is to investigate counts and/or rates of a given health indicator or event within the context of spatial attributes.</li>
<li>What are some of the questions we may be interested in investigating?
<ul>
<li>Trends of rates/counts in specific locations or areas?</li>
<li>Relationship between outcomes and proximity to thinks in the physical environment.</li>
<li>Relationships between outcomes and socio-demographic risk factors.</li>
<li>How many X are there in different locations of Y?</li>
<li>How many of X are found within a certain distance of Y?</li>
</ul>
</li>
<li>Can you think of any public health or other research applications where we may want to answer the questions above?</li>
</ul>
</div>
<p>In this chapter we will use examples to illustrate a number of fundamental and commonly applied spatial operations on spatial datasets. Essentially, the operations illustrate different methods for extracting information from one spatial dataset based on the spatial extent of another, referred to overlay operations. The sections below describe the following operations:</p>
<ol style="list-style-type: decimal">
<li>Intersection and clipping one dataset to the extent of another, Section <a href="lecture4.html#sec1">4.2</a>
</li>
<li>Creating buffers around features <a href="lecture4.html#sec2">4.3</a>
</li>
<li>Merging the features in a spatial dataset <a href="lecture4.html#sec3">4.4</a>
</li>
<li>Point-in-polygon and area calculations</li>
<li>Creating distance attributes</li>
<li>Combining spatial data and attributes</li>
<li>Converting between raster and vector</li>
</ol>
<div id="new-haven-data" class="section level2" number="4.1">
<h2>
<span class="header-section-number">4.1</span> New Haven Data<a class="anchor" aria-label="anchor" href="#new-haven-data"><i class="fas fa-link"></i></a>
</h2>
<p>In lectures, we will illustrate analysis using data from the [New Haven CT crime web site] containing point sources of some crimes, plus roads, railways, and census block spatial data frames. The New Haven data include:</p>
<ul>
<li>blocks: A polygon data set with demographic breakdowns by census blocks within New Haven.</li>
<li>breach: A point data set with locations of breaches of the peace.</li>
<li>roads: A lines data set with road spatial features in New Haven.</li>
<li>places: A point data set with locations of major landmarks in New Haven.</li>
<li>famdisp: A point data set with locations of family disputes.</li>
</ul>
<p>The plot below shows an example of the New Haven data, in which we plot population by census block (orange polygons), the breaches of peace (red), landmarks (blue), and roads (green.)</p>
<div class="inline-figure"><img src="04-BasicGIS_files/figure-html/unnamed-chunk-1-1.png" width="672"></div>
</div>
<div id="sec1" class="section level2" number="4.2">
<h2>
<span class="header-section-number">4.2</span> Spatial Clip and Intersection Operations<a class="anchor" aria-label="anchor" href="#sec1"><i class="fas fa-link"></i></a>
</h2>
<div class="rmdnote">
<p><strong>What is clipping?</strong></p>
<p>A geographic clip cuts out an input layer to a defined spatial feature boundary. Like a cookie-cutter to a spatial area. The clip and intersect tool achieve the same results. The main difference is that an intersection preserves attributes from both tables.</p>
</div>
<p>Consider the situation where the aim is to analyze the incidence of a particular area: we do not want to analyze ALL the data but only those records that describe events in a given study area. In the code below we call in the New Haven data and create <span class="math inline">\(sf\)</span> data frames for the blocks and breaches data. We then subset to areas in central New haven and subsets the census block data to only include these selected areas.</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Call in the libraries</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">GISTools</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-tmap.github.io/tmap/">tmap</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#read in New Haven data and...</span></span>
<span><span class="co">#transform the census block and breach data to sf objects</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">newhaven</span><span class="op">)</span></span>
<span><span class="va">blocks_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf</a></span><span class="op">(</span><span class="va">blocks</span><span class="op">)</span></span>
<span><span class="va">breach_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf</a></span><span class="op">(</span><span class="va">breach</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Set the indices to subset</span></span>
<span><span class="va">indices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">46</span><span class="op">:</span><span class="fl">47</span>,<span class="fl">51</span>, <span class="fl">53</span>, <span class="fl">57</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span></span>
<span><span class="co"># Create a new data set blocks_sf2 that includes only the selected areas</span></span>
<span><span class="va">blocks_sf2</span> <span class="op">&lt;-</span> <span class="va">blocks_sf</span><span class="op">[</span><span class="va">indices</span>,<span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">blocks_sf2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html">tm_polygons</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">breach_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_symbols.html">tm_dots</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="04-BasicGIS_files/figure-html/unnamed-chunk-2-1.png" width="672"></div>
<p>Is this what we want? <strong>No</strong>. We want to clip the breach data to only include points within our selected areas. There are a number of ways to clip spatial data. The simplest way is to use the spatial boundaries of one as an index to subset another.</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Clip the breach data to align with the blocks2 data.</span></span>
<span></span>
<span><span class="va">breach_clip_sf</span> <span class="op">&lt;-</span> <span class="va">breach_sf</span><span class="op">[</span><span class="va">blocks_sf2</span>,<span class="op">]</span></span></code></pre></div>
<p>However, such clip (or crop) operations simply subset data based on spatial boundaries. There may be applications where you wish to combine attributes of different data sets based on <em>spatial intersection</em>. The <span class="math inline">\(st\_intersection()\)</span> function allows us to do this, shown below. Here we want to combine the breach and census block data from New Haven. You can see when we combine data sets we obtain a point data frame with census block attributes for each location.</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Intersect breach and block data</span></span>
<span><span class="va">br_bl_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_binary_ops.html">st_intersection</a></span><span class="op">(</span><span class="va">blocks_sf2</span>, <span class="va">breach_sf</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">br_bl_sf</span><span class="op">)</span></span></code></pre></div>
<pre><code>Simple feature collection with 6 features and 28 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 546241.4 ymin: 169623.6 xmax: 558373.1 ymax: 177376.3
Projected CRS: SOURCECRS
   NEWH075H_ NEWH075H_I HSE_UNITS OCCUPIED VACANT  P_VACANT P_OWNEROCC
98       100         25       375      311     64 17.066667   4.266667
93        95        111         0        0      0  0.000000   0.000000
99       101         27       207      168     39 18.840580  11.111111
83        85        123       461      389     72 15.618221  29.067245
52        54         87       347      328     19  5.475504   2.305476
95        97         51       302      270     32 10.596026  36.092715
   P_RENTROCC NEWH075P_ NEWH075P_I POP1990  P_MALES P_FEMALES   P_WHITE
98   78.66667       100        528     499 56.91383  43.08617 73.547094
93    0.00000        95        523       0  0.00000   0.00000  0.000000
99   70.04831       101        531     782 53.45269  46.54731 30.306905
83   55.31453        85        511    1277 48.08144  51.91856 48.238058
52   92.21902        54        471     967 42.50259  57.49741  3.102378
95   53.31126        97        525     823 49.33171  50.66829 50.911300
    P_BLACK P_AMERI_ES P_ASIAN_PI   P_OTHER  P_UNDER5    P_5_13  P_14_17
98 14.82966   1.002004   9.018036  1.603206  0.801603  2.605210 0.400802
93  0.00000   0.000000   0.000000  0.000000  0.000000  0.000000 0.000000
99 45.26854   0.255754   0.511509 23.657289  9.335038 15.089514 5.626598
83 23.49256   0.156617   0.234926 27.877839 10.884886 17.306186 6.499608
52 94.20889   0.103413   0.000000  2.585315 14.788004 22.130300 7.032058
95 45.07898   0.243013   0.729040  3.037667  9.599028  8.626974 3.037667
    P_18_24  P_25_34   P_35_44  P_45_54  P_55_64   P_65_74   P_75_UP
98 37.47495 30.06012 12.825651 7.615230 4.208417  2.605210  1.402806
93  0.00000  0.00000  0.000000 0.000000 0.000000  0.000000  0.000000
99 10.99744 22.63427 18.414322 7.161125 4.219949  4.731458  1.790281
83 13.31245 17.85435 13.547377 9.162099 5.481597  3.054033  2.897416
52 14.06412 16.95967  8.273009 7.549121 4.446743  3.516029  1.240951
95 12.39368 15.30984 11.664642 7.168894 8.140948 10.692588 13.365735
                    geometry
98 POINT (551423.1 172304.5)
93 POINT (555168.5 172163.4)
99 POINT (549133.6 169623.6)
83 POINT (558373.1 173223.7)
52 POINT (549729.3 177376.3)
95 POINT (546241.4 171265.2)</code></pre>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">blocks_sf2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html">tm_borders</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">br_bl_sf</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_symbols.html">tm_dots</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="04-BasicGIS_files/figure-html/unnamed-chunk-4-1.png" width="672"></div>
</div>
<div id="sec2" class="section level2" number="4.3">
<h2>
<span class="header-section-number">4.3</span> Buffers and Features<a class="anchor" aria-label="anchor" href="#sec2"><i class="fas fa-link"></i></a>
</h2>
<div class="rmdnote">
<p><strong>What is a Buffer?</strong></p>
<p>A buffer in GIS is a reclassification based on distance: classification of within/without a given proximity. In other words, a buffer in GIS is a defined zone or area created around a geographic feature such as a point, line, or polygon.</p>
<p>The buffer is typically measured in units of distance, such as feet, meters, or kilometers, and represents a specific radius or width around the feature.</p>
</div>
<p>In many situations, we are interested in events or features that occur neat to our area of interest as well as those within it. We may be interested in crimes that occur within a certain distance of particular areas or locations. <strong>Buffering</strong> operations provide a convenient way of doing this, and buffers can be created using the <span class="math inline">\(st\_buffer()\)</span> function. In the New Haven data, there is a <span class="math inline">\(places\)</span> data frame that contains major landmarks in New Haven. We can create buffers around the major neighborhoods to define crimes that happen within a certain distance of the neighborhoods.</p>
<p>Setting distance on the buffer: In case dist is a units object, it should be convertible to arc_degree if x has geographic coordinates, and to st_crs(x)$units otherwise.EMILY TO CHECK THIS I THINK BELOW IS 1500m. Pertaining to change projections.</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">newhaven</span><span class="op">)</span></span>
<span><span class="va">breach_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf</a></span><span class="op">(</span><span class="va">breach</span><span class="op">)</span></span>
<span><span class="va">places_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf</a></span><span class="op">(</span><span class="va">places</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"longitude"</span>, <span class="st">"latitude"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="st">"NAD83"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_crs</a></span><span class="op">(</span><span class="va">places_sf</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_crs</a></span><span class="op">(</span><span class="va">breach_sf</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Create a polygon buffer around the places centroids. </span></span>
<span><span class="va">places_sf_buff</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html">st_buffer</a></span><span class="op">(</span><span class="va">places_sf</span>, dist <span class="op">=</span> <span class="fl">1500</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">blocks_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html">tm_polygons</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">places_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_symbols.html">tm_dots</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"blue"</span>, size <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">places_sf_buff</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html">tm_borders</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"green"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">breach_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_symbols.html">tm_dots</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="04-BasicGIS_files/figure-html/unnamed-chunk-5-1.png" width="672"></div>
<p>Alternatively, if you want to subset data to only include those areas/points that are located within a certain distance of another spatial extent, we can use the<span class="math inline">\(st\_is\_within\_distance()\)</span> function. Below we want to identify the breaches that occur within 1500m of the neighborhood centroids. We use the above function to define the following: (1) The first input is the points we want to be the centroids, (2) The area/points that lay within a distance, and (3) The distance value.</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indices_within_dist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_binary_pred.html">st_is_within_distance</a></span><span class="op">(</span><span class="va">places_sf</span>, <span class="va">breach_sf</span>, dist <span class="op">=</span> <span class="fl">1500</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">breach_within</span> <span class="op">&lt;-</span> <span class="va">breach_sf</span><span class="op">[</span><span class="va">indices_within_dist</span>,<span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">blocks_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html">tm_polygons</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">places_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_symbols.html">tm_dots</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"blue"</span>, size <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">places_sf_buff</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html">tm_borders</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"green"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">breach_within</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_symbols.html">tm_dots</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="04-BasicGIS_files/figure-html/unnamed-chunk-6-1.png" width="672"></div>
</div>
<div id="sec3" class="section level2" number="4.4">
<h2>
<span class="header-section-number">4.4</span> Merging Spatial Features<a class="anchor" aria-label="anchor" href="#sec3"><i class="fas fa-link"></i></a>
</h2>
<p>In the intersection example, we selected census blocks within New Haven and used them to define the area of interest. Attributes for the selected census blocks were added to the point data for breaches. In other instances, we may wish to consider the area as a single object and merge all features within it. This can be done using the <span class="math inline">\(st\_combine()\)</span> function. As an exmaple, what is we wanted to derive the outline of the city of New Haven, we can merge all attributes from the census block data shown below.</p>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">merge_blocks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_combine.html">st_union</a></span><span class="op">(</span><span class="va">blocks_sf</span><span class="op">)</span></span>
<span><span class="va">merge_blocks</span></span></code></pre></div>
<pre><code>## Geometry set for 1 feature 
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: 531731.9 ymin: 147854 xmax: 569625.3 ymax: 188464.6
## Projected CRS: SOURCECRS</code></pre>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">blocks_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html">tm_borders</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"darkgreen"</span>, lty <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">merge_blocks</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html">tm_borders</a></span><span class="op">(</span>lwd <span class="op">=</span> <span class="fl">1.5</span>, col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="04-BasicGIS_files/figure-html/unnamed-chunk-7-1.png" width="672"></div>
<p>The union operations merge spatial object sub-geometries. Once the merged objects have been created they can be used as inputs into the intersection and buffering procedures in order to select data for analysis. The merged objects can also be used in a cartographic context to provide a border to the study area being considered.</p>
</div>
<div id="point-in-polygon-and-area-calculations" class="section level2" number="4.5">
<h2>
<span class="header-section-number">4.5</span> Point-In-Polygon and Area Calculations<a class="anchor" aria-label="anchor" href="#point-in-polygon-and-area-calculations"><i class="fas fa-link"></i></a>
</h2>
<div id="point-in-polygon" class="section level3" number="4.5.1">
<h3>
<span class="header-section-number">4.5.1</span> Point-In-Polygon<a class="anchor" aria-label="anchor" href="#point-in-polygon"><i class="fas fa-link"></i></a>
</h3>
<p>It is often useful to count the number of points falling within different ones in a polygon datasets. This can be done using the <span class="math inline">\(poly.counts()\)</span> function in the <a href="http://cran.nexr.com/web/packages/GISTools/GISTools.pdf"><em>GISTools</em></a> package, which extends on the <span class="math inline">\(st\_contains()\)</span> function. The code below assigns a list of counts of the number of crimes that occur inside each census block using the <span class="math inline">\(st\_contain()\)</span> function. We use the <span class="math inline">\(lapply()\)</span> function to count the number crimes in each list element.</p>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crime.count</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html">rowSums</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_binary_pred.html">st_contains</a></span><span class="op">(</span><span class="va">blocks_sf</span>,<span class="va">breach_sf</span>, sparse <span class="op">=</span> <span class="cn">F</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">blocks_sf</span><span class="op">$</span><span class="va">crime.count</span> <span class="op">&lt;-</span> <span class="va">crime.count</span></span>
<span><span class="va">blocks_sf</span><span class="op">$</span><span class="va">crime.count</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></code></pre></div>
<pre><code> [1] 2 0 2 0 2 0 0 0 3 0</code></pre>
<p>These number represent the number of breaches in each census block in each row of the <span class="math inline">\(blocks\_sf\)</span> data frame.</p>
</div>
<div id="area-calculations" class="section level3" number="4.5.2">
<h3>
<span class="header-section-number">4.5.2</span> Area Calculations<a class="anchor" aria-label="anchor" href="#area-calculations"><i class="fas fa-link"></i></a>
</h3>
<p>Another useful operation is to be able to calculate polygon areas. The <span class="math inline">\(st\_area()\)</span> function computes the euclidean or great circle distance between pairs of geometries. The results below show the square footage of the first 4 census blocks. Perhaps not a super useful metric to use. We can convert the calculation to square mile using the <span class="math inline">\(ft2mile()\)</span> function, which converts to 2.8 sq. feet per sq. mile.</p>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">areas_calc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html">st_area</a></span><span class="op">(</span><span class="va">blocks_sf</span><span class="op">)</span></span>
<span><span class="va">areas_calc</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/GISTools/man/ft2miles.html">ft2miles</a></span><span class="op">(</span><span class="va">areas_calc</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="creating-distance-attributes" class="section level2" number="4.6">
<h2>
<span class="header-section-number">4.6</span> Creating Distance Attributes<a class="anchor" aria-label="anchor" href="#creating-distance-attributes"><i class="fas fa-link"></i></a>
</h2>
<div class="rmdnote">
<p><strong>Why is distance important?</strong></p>
<p>Distance is fundamental to spatial analysis. Distance measures are used to evaluate differences in accessibility for different social groups.</p>
</div>
<p>We may wish to analyze the number of locations or people within certain distances of the spatial features. Distance is approximated using a series of buffers created at specific distance intervals around features. The most common function used is <em>dist()</em>. This calculates Euclidean distance between points.</p>
<p>Let’s calculate the distance between the centroids (midpoints) of New Haven census blocks and the green spaces locations (these could also represent other features, i.e., facility locations, clinics). The locations of green spaces in NH is saved in the <em>places</em> dataset.</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Extract the centroids (midpoints) of the New Haven census blocks. </span></span>
<span><span class="va">centroids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html">st_centroid</a></span><span class="op">(</span><span class="va">blocks_sf</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Calculate the distance between the census block midpoints and the place locations.</span></span>
<span><span class="co">#notes the use of the ft2miles function to convert to miles</span></span>
<span><span class="va">cents_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf</a></span><span class="op">(</span><span class="va">centroids</span><span class="op">)</span></span>
<span><span class="va">distances</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/GISTools/man/ft2miles.html">ft2miles</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html">st_distance</a></span><span class="op">(</span><span class="va">cents_sf</span>, <span class="va">places_sf</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">distances</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span></code></pre></div>
<pre><code>Units: [US_survey_foot]
[1] 2.910784 2.666624 2.963935 2.924395 3.175274</code></pre>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">blocks_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html">tm_polygons</a></span><span class="op">(</span><span class="st">"white"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html">tm_borders</a></span><span class="op">(</span><span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">cents_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_symbols.html">tm_dots</a></span><span class="op">(</span><span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">places_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_symbols.html">tm_dots</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"green"</span>, size <span class="op">=</span> <span class="fl">0.3</span>, alpha <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> </span></code></pre></div>
<div class="inline-figure">
<img src="04-BasicGIS_files/figure-html/unnamed-chunk-10-1.png" width="672">
What do we get?</div>
<ul>
<li>distances: A 129 by 9 matrix.</li>
<li>For each block midpoint, the distance (in miles) to the 9 different places.</li>
<li>Using this matrix, we can provide a measure of the average distance experienced by people living in that area (census block) to get to those places.</li>
</ul>
</div>
<div id="distanceaccessibility-analysis" class="section level2" number="4.7">
<h2>
<span class="header-section-number">4.7</span> Distance/Accessibility Analysis<a class="anchor" aria-label="anchor" href="#distanceaccessibility-analysis"><i class="fas fa-link"></i></a>
</h2>
<p>The use of distance measures in conjunction with census data is particularly useful for analyzing access to locations or facilities. We may want to examines access to green spaces or hospitals for different social groups. In our current example, we can examine the equity of access to local landmarks recorded in the <em>places</em> location data for different ethnic groups reported in the <em>blocks</em> dataset. We will use the census data to approximate the number of people with and without access of less than 1 mile.</p>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Create a vector that calculates the minimum distance to green space for each census block</span></span>
<span><span class="co">#Use the apply function that does row or column wise calculations, i.e., instead of doing every row separately. </span></span>
<span><span class="co">#?apply</span></span>
<span><span class="va">min.dist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">distances</span>, <span class="fl">1</span>, <span class="va">min</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#Create indicator if there is a green space location within 1 mile (T or F)</span></span>
<span><span class="va">blocks_sf</span><span class="op">$</span><span class="va">access</span> <span class="op">&lt;-</span> <span class="va">min.dist</span> <span class="op">&lt;</span> <span class="fl">1</span> <span class="co">#This statement says "is the min distance less than 1, yes or no?"</span></span>
<span><span class="va">blocks_sf</span><span class="op">$</span><span class="va">access</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE</code></pre>
<p>Let’s take a look at the data</p>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-tmap.github.io/tmap/">tmap</a></span><span class="op">)</span></span>
<span><span class="co"># View(blocks_sf)</span></span>
<span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">blocks_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_polygons.html">tm_polygons</a></span><span class="op">(</span><span class="st">"access"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_shape.html">tm_shape</a></span><span class="op">(</span><span class="va">places_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/tm_symbols.html">tm_dots</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">0.3</span>, alpha <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="04-BasicGIS_files/figure-html/unnamed-chunk-12-1.png" width="672"></div>
<p>The populations of each ethnic group in each census block can be extracted from the <em>blocks</em> dataset:</p>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># extract the ethnicity data from the blocks variable</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">blocks</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,<span class="fl">14</span><span class="op">:</span><span class="fl">18</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>##     P_WHITE  P_BLACK P_AMERI_ES P_ASIAN_PI  P_OTHER
## 0  7.095159 87.02003   0.584307   0.041736 5.258765
## 1 87.105177 10.45262   0.195376   0.521003 1.725822
## 2 32.931727 66.26506   0.100402   0.200803 0.502008</code></pre>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Create a matrix of proportions of each ethnic group</span></span>
<span><span class="va">ethnicity</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">blocks</span><span class="op">[</span>,<span class="fl">14</span><span class="op">:</span><span class="fl">18</span><span class="op">]</span><span class="op">)</span><span class="op">/</span><span class="fl">100</span><span class="op">)</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Multiple proportion by the population to get the number within each group using colimn-wise apply() function.</span></span>
<span><span class="va">ethnicity</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">ethnicity</span>, <span class="fl">2</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">(</span><span class="va">x</span> <span class="op">*</span> <span class="va">blocks_sf</span><span class="op">$</span><span class="va">POP1990</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">#Create a matrix of counts by group</span></span>
<span><span class="va">ethnicity</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="va">ethnicity</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">ethnicity</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"White"</span>, <span class="st">"Black"</span>,</span>
<span><span class="st">"Native American"</span>, <span class="st">"Asian"</span>, <span class="st">"Other"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ethnicity</span><span class="op">$</span><span class="va">access</span> <span class="op">&lt;-</span> <span class="va">blocks</span><span class="op">$</span><span class="va">access</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ethnicity</span><span class="op">)</span></span></code></pre></div>
<pre><code>##   White Black Native American Asian Other
## 1   170  2084              13     0   126
## 2  2674   320               5    16    52
## 3   328   659               1     1     4
## 4   153  1142               6     6    26
## 5   672   223               3    12     3
## 6  1156    97               9    11    41</code></pre>
<div class="rmdtip">
<p><strong>Lab 4 Activity</strong></p>
<ol style="list-style-type: decimal">
<li><p>Using your R Markdown file from Lab 3, read in your project data and convert it to an <span class="math inline">\(sf\)</span> data frame using the <span class="math inline">\(st\_as\_sf()\)</span> function as before.</p></li>
<li><p>Using your area (polygon) data, create a set of indices to subset (you can set your own indices or you can use the code below which selects 5 indices at random out of 50 indices).</p></li>
</ol>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">50</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">5</span>, replace <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li><p>Create a data frame that only includes the selected row indices.</p></li>
<li><p>Subset your point data to only include points in the selected areas.</p></li>
<li><p>Plot the subsetted point and area data using the <span class="math inline">\(tmap\)</span> functions.</p></li>
<li><p>Using the full point and area data, create a buffer of 1000 m surrounding each point and create a plot with the boundaries of the spatial polygons, the points, and the surrounding buffers.</p></li>
<li><p>Using the full point and area data, calculate the number of incidents that occur within each polygon using the <span class="math inline">\(st\_contains()\)</span> function.</p></li>
<li><p>Using the full point and area data, calculate the number of incidents that occurred within a 1000 m distance of the point data.</p></li>
</ol>
</div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="lecture3.html"><span class="header-section-number">3</span> Data Wrangling</a></div>
<div class="next"><a href="introduction-to-raster-in-r.html"><span class="header-section-number">5</span> Introduction to Raster in R</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#lecture4"><span class="header-section-number">4</span> Basic GIS Operations</a></li>
<li><a class="nav-link" href="#new-haven-data"><span class="header-section-number">4.1</span> New Haven Data</a></li>
<li><a class="nav-link" href="#sec1"><span class="header-section-number">4.2</span> Spatial Clip and Intersection Operations</a></li>
<li><a class="nav-link" href="#sec2"><span class="header-section-number">4.3</span> Buffers and Features</a></li>
<li><a class="nav-link" href="#sec3"><span class="header-section-number">4.4</span> Merging Spatial Features</a></li>
<li>
<a class="nav-link" href="#point-in-polygon-and-area-calculations"><span class="header-section-number">4.5</span> Point-In-Polygon and Area Calculations</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#point-in-polygon"><span class="header-section-number">4.5.1</span> Point-In-Polygon</a></li>
<li><a class="nav-link" href="#area-calculations"><span class="header-section-number">4.5.2</span> Area Calculations</a></li>
</ul>
</li>
<li><a class="nav-link" href="#creating-distance-attributes"><span class="header-section-number">4.6</span> Creating Distance Attributes</a></li>
<li><a class="nav-link" href="#distanceaccessibility-analysis"><span class="header-section-number">4.7</span> Distance/Accessibility Analysis</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/Enpeterson/INFO532/blob//04-BasicGIS.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/Enpeterson/INFO532/edit//04-BasicGIS.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>INFO 532: Advanced GIS</strong>" was written by Emily Peterson &amp; Alex Edwards. It was last built on Last updated: 2023-10-16.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
